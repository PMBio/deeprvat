name: DeepRVAT
run-name: DeepRVAT üß¨üß™üíªüßë‚Äçüî¨
on: [ push ]

jobs:
  DeepRVAT-Preprocessing-Pipeline-Smoke-Tests:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Preprocessing Smoke Test With QC
        uses: snakemake/snakemake-github-action@v1.24.0
        with:
          directory: 'example/preprocess'
          snakefile: 'pipelines/preprocess_with_qc.snakefile'
          args: '-j 2 -n --configfile pipelines/config/deeprvat_preprocess_config.yaml'
          stagein: 'touch example/preprocess/workdir/reference/GRCh38.primary_assembly.genome.fa'

      - name: Preprocessing Smoke Test No QC
        uses: snakemake/snakemake-github-action@v1.24.0
        with:
          directory: 'example/preprocess'
          snakefile: 'pipelines/preprocess_no_qc.snakefile'
          args: '-j 2 -n --configfile pipelines/config/deeprvat_preprocess_config.yaml'
          stagein: 'touch example/preprocess/workdir/reference/GRCh38.primary_assembly.genome.fa'


  DeepRVAT-Annotation-Pipeline-Smoke-Tests:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Annotations Smoke Test
        uses: snakemake/snakemake-github-action@v1.25.1
        with:
          directory: 'example/annotations'
          snakefile: 'pipelines/annotations.snakefile'
          args: '-j 2 -n --configfile pipelines/config/deeprvat_annotation_config.yaml'

